/* minified v1.2 */
!function(e){let o={getTitle:".title",showTitle:!0,getInfo:".info",showInfo:!1,getPic:"a:first",fullScreen:!0,slideTime:5e3,onOpen:null,onClose:null,onNext:null,onPrev:null},t=0,l=[];function i(o,t){if(!t.length)return;let l=o.key.toLowerCase();switch(l){case"arrowright":e(".mbox-next:visible").trigger("click");break;case"arrowleft":e(".mbox-prev:visible").trigger("click");break;case" ":e(".mbox-play").trigger("click");break;case"escape":e(".mbox-close").trigger("click");break;case"r":e(".mbox-rotate").trigger("click");break;case"c":e(".mbox-screenfit").trigger("click")}}e.fn.mBox=function(c){let x=e.extend({},o,c);return this.each(function(){let c=e(this);if(!c.attr("mbox-id")){let d;do d=t++;while(e(`[mbox-id="${d}"]`).length>0);c.attr("mbox-id",d)}c.attr("mbox-type")||c.attr("mbox-type","image"),c.attr("mbox-full")||c.attr("mbox-full","true"),c.attr("mbox-group")||c.attr("mbox-group","ungrouped"),c.on("click",function(t){t.preventDefault(),function t(c,x){let d=e('<div class="mbox-ctr"></div>'),b=e('<div class="mbox-bg"></div>'),g=e('<div class="mbox-lightbox"></div>').data("currentEl",c),u=e('<div class="mbox-content"></div>'),f=e('<div class="mbox-controls"></div>'),p=c.attr("mbox-group"),h=l.filter(e=>e.attr("mbox-group")===p),v=h.findIndex(e=>e.is(c)),$=h.length,k=e(`<div class="mbox-header">
        <div class="mbox-count">${v+1}/${$}</div>
        <ul class="mbox-actions">
          <li class="mbox-play"></li><li class="mbox-rotate"></li><li class="mbox-screenfit"></li><li class="mbox-fullscreen"></li><li class="mbox-close"></li>
        </ul>
      </div>`),w=e(`<div class="mbox-footer">
        <div xtitle="social Icons will go here in future" class="mbox-icons"></div>
        <div tabindex="0" class="mbox-descr">
          <div class="mbox-title"></div>
          <div class="mbox-info-ctr"><div class="mbox-info"></div></div>
        </div>
        <div class="mbox-preload"></div>
        <div class="mbox-progress-out"><div class="mbox-progress" style="width: 0%;"></div></div>
      </div>`),y=e('<div class="mbox-prev"></div>').toggle(v>0),_=e('<div class="mbox-next"></div>').toggle(v<$-1);g.append(u,k,w),f.append(y,_),g.append(f),d.append(b,g),0===e(".mbox-main-body").length?e("body").wrapInner('<div class="mbox-main-body mbox-blur"></div>'):e(".mbox-main-body").addClass("mbox-blur"),e("body").append(d),!0===x.fullScreen&&n(),m(c,v,$,x),d.on("click",".mbox-close",()=>{var o,t;return o=d,t=x,void(o.remove(),e(".mbox-main-body").removeClass("mbox-blur"),e(document).off("keydown",i),t.onClose&&t.onClose())}),y.on("click",()=>a(-1,v,h,x)),_.on("click",()=>a(1,v,h,x)),e(".mbox-screenfit").on("click",()=>void(e("body").hasClass("mbox-zoomfit")?e("body").removeClass("mbox-zoomfit"):e("body").addClass("mbox-zoomfit"))),e(".mbox-rotate").on("click",()=>(function o(t){let l=e(".mbox-main-img"),i=parseInt(l.attr("mbox-deg"));if(isNaN(i)&&(i=0),360==(i+=90)&&(i=0),90==i||270==i){let s=e(window).height(),r=e(window).width();l.css({transform:"rotate("+i+"deg)",width:s+"px",height:r+"px"})}else l.css({transform:"rotate("+i+"deg)",width:"",height:""});l.attr("mbox-deg",i)})(x.slideTime)),e(".mbox-fullscreen").on("click",()=>n()),e(".mbox-play").on("click",()=>(function t(){let l=e(".mbox-play"),i=e(".mbox-progress-out"),n=e(".mbox-progress"),a=e.extend({},o);if(l.hasClass("mbox-pause"))l.removeClass("mbox-pause"),i.hide(),n.css("width","0%"),clearTimeout(s),clearTimeout(r),s=null,r=null;else{l.addClass("mbox-pause"),i.show();let m=a.slideTime||5e3,c=0;function x(){c+=1e3;let e=c/m*100;n.css("width",`${e}%`),c<m&&l.hasClass("mbox-pause")&&(r=setTimeout(x,1e3))}function d(){let o=e(".mbox-next:visible"),i=e(".mbox-preload-next").length>0;l.hasClass("mbox-pause")&&!i?o.length>0?(c=0,o.trigger("click"),x(),s=setTimeout(d,m)):t():i&&(s=setTimeout(d,500))}x(),s=setTimeout(d,m)}})()),e(".mbox-descr").on("mouseenter",()=>e(".mbox-info").slideDown("fast")),e(".mbox-descr").on("mouseleave",()=>e(".mbox-info").slideUp("fast")),e(document).on("keydown",e=>i(e,d)),x.onOpen&&x.onOpen(c,g)}(c,x)}),l.push(c)}),this};let s=null,r=null;function n(){let o=e(".mbox-ctr");o.length&&(document.fullscreenElement?document.exitFullscreen().then(()=>{e(".mbox-fullscreen").removeClass("mbox-restore")}).catch(e=>{console.error("Error exiting fullscreen:",e)}):o[0].requestFullscreen().then(()=>{e(".mbox-fullscreen").addClass("mbox-restore")}).catch(e=>{console.error("Error entering fullscreen:",e)}))}function a(o,t,l,i){let s=e(".mbox-lightbox").data("currentEl"),r=l.findIndex(e=>e.is(s)),n=r+o;if(n<0||n>=l.length)return;let a=l[n];m(a,n,l.length,i),e(".mbox-lightbox").data("currentEl",a),1===o&&i.onNext&&i.onNext(a),-1===o&&i.onPrev&&i.onPrev(a)}function m(o,t,i,s){let r=e(".mbox-lightbox"),n=r.find(".mbox-content"),a=r.find(".mbox-header"),m=o.find(s.getTitle).text()||"",c=o.find(s.getInfo).html()||"";a.find(".mbox-count").text(`${t+1}/${i}`),e(".mbox-title").html(`${m}`),e(".mbox-info").html(`${c}`);let x=o.find(s.getPic+" img:first").attr("src"),d=s.slideTime/1e3;n.html(`
    <img src="${x}" style="animation-duration:${d}s" class="mbox-main-img" />
    <div class="mbox-loading"></div>
  `);let b=o.find(s.getPic).attr("href");e(".mbox-preload").append(`<img src="${b}" alt="preloading current" class="mbox-preload-current" />`);let g=l.filter(e=>e.attr("mbox-group")===o.attr("mbox-group")),u=[];if(t+1<i){let f=g[t+1],p=f.find(s.getPic).attr("href");u.push(`<img src="${p}" alt="preloading next" class="mbox-preload-next" />`)}if(t-1>=0){let h=g[t-1],v=h.find(s.getPic).attr("href");u.push(`<img src="${v}" alt="preloading previous" class="mbox-preload-prev" />`)}e(".mbox-preload").append(u.join("")),e(".mbox-preload-prev, .mbox-preload-next").on("load",function(){e(this).remove()}),e(".mbox-preload-current").on("load",function(){let o=e(this).attr("src"),t=e(this)[0].naturalWidth,l=e(this)[0].naturalHeight;e(".mbox-main-img").attr("mbox-h",l),e(".mbox-main-img").attr("mbox-w",t),e(".mbox-main-img").attr("src",o),e(".mbox-loading").remove(),e(this).remove()});let $=e(".mbox-prev"),k=e(".mbox-next");$.toggle(t>0),k.toggle(t<i-1)}}(jQuery);